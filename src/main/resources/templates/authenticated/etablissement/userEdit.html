<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.w3.org/1999/xhtml">

<head th:replace="authenticated/fragments/header::header(${'title'},${'description'},${'keywords'})">
</head>


<body>

<!-- ======= Header ======= -->
<header th:replace="authenticated/fragments/navbar::header"></header>
<!-- End Header -->

<!-- ======= Sidebar ======= -->
<aside th:replace="authenticated/fragments/navside::sidebar"></aside>
<!-- End Sidebar-->


<main id="main" class="main">
    <div class="card">

        <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
            <img th:src="@{'/user/imgPro/'+${user.getId()}+'/images/profileImage'}"


                 height="100px" width="100px"
                 class="rounded-circle">

            <h2 th:text="${user.getFirstname()+'  '+user.getLastname()}"></h2>
            <h3 th:text="${user.getFonction()}"></h3>
            <div class="social-links mt-2" hidden="hidden">
                <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
                <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
                <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
                <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
            </div>

            <div class="row">
                <div class="col-6">
                    <div class="tab-pane fade show active profile-overview" th:fragment="profile-signIn(message)"
                         id="profile-signIn">

                        <h5 class="card-title"> Modification de compte</h5>
                        <!-- Profile Edit Form "-->
                        <form id="profileForm" th:action="@{'/user/userEditData/'+${user.getId()}}" method="post"
                              enctype="multipart/form-data">

                            <div class="row mb-3">
                                <label class="col-md-4 col-lg-3 col-form-label">Profile Image</label>
                                <div class="col-md-8 col-lg-9">
                                    <input type="file" class="img-thumbnail" id="profileImage"
                                           name="profileImage">

                                </div>
                            </div>

                            <div class="row mb-3 ">
                                <label for="firstname" class="col-md-4 col-lg-3 col-form-label">First
                                    Name</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="firstname" type="text" class="form-control"
                                           id="firstname" placeholder="First name"
                                           th:value="${user.getFirstname()}">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="lastname" class="col-md-4 col-lg-3 col-form-label">Last Name</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="lastname" type="text" class="form-control" id="lastname"
                                           placeholder="Last Name"
                                           th:value="${user.getLastname()}">

                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="username" class="col-md-4 col-lg-3 col-form-label">User Name</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="username" type="text" class="form-control" id="username"
                                           placeholder="User Name"
                                           th:value="${user.getUsername()}">

                                </div>
                            </div>






                            <div class="row mb-3">
                                <label for="role"
                                       class="col-md-4 col-lg-3 col-form-label">Role</label>
                                <div class="col-md-8 col-lg-9">

                                    <select id="role" name="role" class="form-control">
                                        <option disabled value="">Select Role</option>
                                        <option th:selected="${user.getRole()=='ADMIN'}" selected value="ADMIN"> 1 -
                                            ADMIN
                                        </option>
                                        <option th:selected="${user.getRole()=='USER'}" selected value="USER"> 2 -
                                            USER
                                        </option>

                                    </select>

                                </div>
                            </div>


                            <div class="row mb-3">
                                <label for="Address" class="col-md-4 col-lg-3 col-form-label">Address
                                    (Office)</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="address" type="text" class="form-control" id="address"
                                           placeholder="Address (Office)"
                                           th:value="${user.getAddressoffice()}">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="Phone" class="col-md-4 col-lg-3 col-form-label">Phone
                                    (office)</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="phone" type="number" class="form-control" id="phone"
                                           placeholder="Phone"
                                           th:value="${user.getPhoneoffice()}"
                                    >
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="Phone" class="col-md-4 col-lg-3 col-form-label">Mobile</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="mobile" type="number" class="form-control" id="mobile"
                                           placeholder="Mobile"
                                           th:value="${user.getMobile()}"
                                    >
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="fonction" class="col-md-4 col-lg-3 col-form-label">Fonction</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="fonction" type="text" class="form-control" id="fonction"
                                           placeholder="Fonction"
                                           th:value="${user.getFonction()}"
                                    >
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label for="Email" class="col-md-4 col-lg-3 col-form-label">Email</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="email" type="email" class="form-control" id="email" placeholder="Email"
                                           th:value="${user.getEmail()}"
                                    >
                                </div>
                            </div>

                            <div class="row mb-3">

                                <label for="Password"
                                       class="col-md-4 col-lg-3 col-form-label">Password</label>

                                <div class="col-md-8 col-lg-9">
                                    <input name="password" type="password" class="form-control"
                                           id="password" placeholder="Password" th:value="${user.getPassword()}">
                                </div>
                            </div>

                            <div class="row mb-3" hidden="hidden">
                                <label for="renewPassword" class="col-md-4 col-lg-3 col-form-label">Re-enter
                                    Password</label>
                                <div class="col-md-8 col-lg-9">
                                    <input name="renewpassword" type="password" class="form-control"
                                           id="renewPassword" placeholder="Password">
                                </div>
                            </div>


                            <div class="row mb-3">
                                <label for="profileImage" class="col-md-4 col-lg-3 col-form-label">Profile Files</label>
                                <div class="col-md-8 col-lg-9">
                                    <input type="file" class="form-control-file" id="profilFiles"
                                           name="profilFiles" multiple>

                                </div>
                            </div>

                            <!--onclick="submitForm('direction','departement','service')"-->
                            <div class="text-center">
                                <button type="submit"
                                        class="btn btn-primary">Save
                                </button>
                            </div>
                        </form><!-- End Profile Edit Form -->
                    </div>

                </div>
                <div class="col-6">

                    <div class="">
                        <div class="card-body">
                            <h5 class="card-title">Documents</h5>
                            <!-- Active Table -->
                            <table class="table table-borderless">
                                <thead>
                                <tr>
                                    <th hidden="hidden" scope="col-12">Name</th>
                                </tr>
                                </thead>

                                <tbody>

                                <tr>

                                    <td th:if="${!user.getMultimediaList().isEmpty()}">
                                        <div class="">
                                            <div class="col">
                                                <ul class="list-group">
                                                    <li class="list-group-item"
                                                        th:each="multimedia : ${user.getMultimediaList()}">
                                                        <div class="row d-flex ">
                                                            <div class="col p-2">


                                                                <i th:if="${multimedia.getFilePath()=='images'}"
                                                                   class=" bx bxs-file-image"></i>
                                                                <i th:if="${multimedia.getFilePath()=='pdfs'}"
                                                                   class=" bx bxs-file-pdf"></i>
                                                                <i th:if="${multimedia.getFilePath()=='videos'}"
                                                                   class=" bx bxs-video"></i>
                                                                <i th:if="${multimedia.getFilePath()=='other'}"
                                                                   class="bi bi-file-text-fill"></i>

                                                                <a th:href="@{'/user/multimedia/'+${multimedia.getFilePath()}+'/'+${multimedia.getFileName()}}"
                                                                   th:text="${#strings.arraySplit(multimedia.getFileName(), '_')[1] }"
                                                                   target="_blank"
                                                                ></a>
                                                                <span th:if="${multimedia.getDocType()=='profileImage'}"
                                                                      th:text="'( Profile picture )'"></span>
                                                                <!-- Add other multimedia details as needed -->


                                                            </div>
                                                            <div class="col-2 p-2" onclick="return confirm('Êtes-vous sûr de bien vouloir supprimer cet élément ?');">

                                                                <a  th:href="@{'/multimedia/delete/'+${multimedia.getId()}+'/'+${user.getId()}}"
                                                                    class="fa-regular fa-trash-can icon-dark btn-delete"
                                                                   title="Remove"><i
                                                                        class="bi bi-trash"></i></a>
                                                            </div>


                                                        </div>
                                                    </li>

                                                </ul>
                                                <!-- Add other multimedia details as needed -->
                                            </div>

                                        </div>
                                    </td>

                                    <th hidden="hidden" th:if="${!user.getMultimediaList().isEmpty()}"
                                        th:text="Documents"
                                        scope="row"></th>
                                </tr>
                                </tbody>
                            </table>
                            <!-- End Tables without borders -->
                        </div>
                    </div>
                </div>


            </div>


        </div>
    </div>
</main><!-- End #main -->


<!-- ======= Footer ======= -->
<footer th:replace="authenticated/fragments/footer::footer" class="footer">
</footer><!-- End Footer -->

<!-- Template Main JS File -->
<div th:replace="authenticated/fragments/js::js"></div>


</body>
</html>